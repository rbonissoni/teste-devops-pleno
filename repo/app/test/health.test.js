const http=require('http');function req(p){return new Promise((res,rej)=>{const q=http.request({host:'127.0.0.1',port:3000,path:p,method:'GET'},r=>{let d='';r.on('data',x=>d+=x);r.on('end',()=>res({status:r.statusCode,body:d}))});q.on('error',rej);q.end();});}(async()=>{const {spawn}=require('child_process');const s=spawn('node',['app.js'],{cwd:__dirname+'/..'});await new Promise(r=>setTimeout(r,800));try{const r=await req('/health');if(r.status!==200||!r.body.includes('status'))process.exit(1);s.kill();process.exit(0);}catch(e){s.kill();process.exit(1);}})();